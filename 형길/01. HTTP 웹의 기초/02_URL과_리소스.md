# 2장. URL과 리소스

<br>

## 소개

<br>

도시의 리소스(박물관,레스토랑,집 등)를 분류하기 위해 표준화된 이름을 가지고 있다.

`URL은 인터넷 리소스(텍스트, 이미지, 동영상 등 웹에서 사용되는 식별할 수 있는 모든 자원)를 가리키는 표준 이름`이다.

해당 장을 통해 다음과 같은 내용을 알아본다.

- URL 문법, 여러 URL 컴포넌트가 어떤 의미를 가지며 무엇을 수행하는지

- 여러 웹 클라이언트가 지원하는 상대 URL과 확장 URL 같은 단축 URL에 대해서

- URL의 인코딩과 문자 규칙

- 여러 인터넷 정보 시스템에 적용되는 공통 URL 스킴

- 기존 이름은 유지하면서 객체들을 다른 장소로 옮기는 것을 가능하게 해주는 URN을 포함한 URL의 미래



<br><br>

## 2.1 인터넷의 리소스 탐색하기

- URL은 필요한 리소스의 위치를 가리키며, URL을 이용해 수많은 리소스를 찾고 사용하며 공유할 수 있다.

- `사용자는 브라우저에 URL을 입력하고, 브라우저는 적절한 프로토콜을 사용하여 메시지를 전송한다.`

<br>

- URI은 URL과 URN으로 구성된 종합적인 개념이다.

- 예를 들어, http://<e>www.joes-hardware<e>.com/seasonal/index-fall.html 이라는 URL을 불러오고 싶다면

  1. http는 URL의 스킴이며 `스킴은 웹 클라이언트가 리소스에 어떻게 접근하는지 알려준다.` 해당 경우에는 HTTP 프로토콜을 사용한다는 뜻이다.
  
  2. www.<e>joes-hardware<e>.com은 서버의 위치이다. 이는 웹 클라이언트가 `리소스가 어디에 호스팅 되어 있는지 알려준다.`
  
  3. /seaonal/index-fall.html은 리소스의 경로이다. `서버에 존재하는 리소스 중 요청받은 리소스가 무엇인지 알려준다.`

<br>

- URL은 http 뿐만 아니라 ftp://<e>ftf.lots-o.books<e>.com, rtsp://<e>www.joes-hardware<e>.com:554/cto_video 등 인터넷에 있는 어떤 리소스든지 가리킬 수 있다.

- `스킴://서버위치/경로` 구조로 이루어져 있다.

<br><br>

## 2.2 URL 문법

- URL 스킴의 문법은 일반적으로 9개 부분으로 나뉘며 모든 컴포넌트를 가지는 URL은 거의 없다. 가장 중요한 3가지는 스킴, 호스트, 경로이다.

    <스킴>://<사용자 이름>;<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>

    | 컴포넌트 | 설명 | 기본값 | 
    | --- | --- | --- |
    | 스킴 | 리소스를 가져오려면 어떤 프로토콜을 사용하여 서버에 접근해야 하는지 가리킨다. | 없음 |
    | 사용자 이름 | 몇몇 스킴은 리소스에 접근하기 위해 사용자 이름을 필요로 한다. | anonymous |
    | 비밀번호 | 사용자의 비밀번호를 가리키며, 사용자 이름에 콜론(:)으로 이어서 기술한다. | <이메일 주소> |
    | 호스트 | 리소스를 호스팅하는 서버의 호스트 명이나 IP 주소 | 없음 |
    | 포트 | 리소스를 호스팅하는 서버가 열어놓은 포트 번호, 많은 스킴이 기본 포트를 가지고 있으며 HTTP의 기본 포트는 80이다. | 스킴에 따라 다름 |
    | 경로 | 이전 컴포넌트와 빗금(/)으로 구분되어 있으며, 서버 내 리소스가 서버 어디에 위치하고 있는지를 가리킨다.  | 없음 |
    | 파라미터 | 특정 스킴들에서 입력 파라미터를 기술하는 용도로 사용한다. | 없음 |
    | 질의 | 스킴에서 애플레이션에 파라미터를 전달하는데 쓰인다. | 없음 |
    | 프래그먼트 | 리소스의 조각이나 일부분을 가리키는 이름이다. | 없음 |

<br><br>

### 2.2.1 스킴 : 사용할 프로토콜

- 스킴은 주어진 리소스에 어떻게 접근하는지 알려주는 중요한 정보이다.

<br>

### 2.2.2 호스트와 포트

- 애플리케이션이 인터넷에 있는 리소스를 찾으려면, 리소스를 호스팅하고 있는 장비와 그 장비 내에서 리소스에 접근할 수 있는 서버가 어디에 있는지 알아야 한다.

- 호스트는 리소스를 가지고 있는 인터넷상의 호스트 장비를 가리킨다.

- 포트는 서버가 열어놓은 네트워크 포트를 가리킨다.

<br>

### 2.2.3 사용자 이름과 비밀번호

- FTP 서버같은 경우에는 데이터 접근을 허용하기 전 사용자 이름과 비밀번호를 요구한다.

- 예를 들어, ftp://anonymous:my_passwd@ftp.prep.ai.mit.edu/pub/gnu

<br>

### 2.2.4 경로

- 경로는 리소스가 서버의 어디에 있는지 알려준다.

- 계층적 파일 시스템 경로와 유사한 구조를 가진다.

<br>

### 2.2.5 파라미터

- 파라미터는 애플리케이션이 서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용한다.

- 이름/값 쌍의 리스트로 ';' 문자로 구분하여 URL에 기술한다. 

- 예를 들어, http://<e>www.joes-hardware<e>.com/hammers;sale=false/index.html<e>;grphics=true에 대해 설명하자면

    hammer와 index.html이라는 두 개의 경로 조각이 있고, hammers 경로 조각은 값이 false인 sale 파라미터를 가진다. index.html 경로 조각은 값이 true인 graphics란 파라미터를 가진다.

<br>

### 2.2.6 질의 문자열

- 데이터베이스 같은 서비스들은 요청받을 리소스 형식의 범위를 좁히기 위해서 질의를 받을 수 있다.

- 예를 들어, 죠의 컴퓨터 가게가 판매되지 않은 상품의 재고 리스트가 있고, 어떤 상품들이 비축되어 있는지 조회할 수 있다면 URL은 어떻게 작성할까?

<br>

- http://<e>www.joes-hardware<e>.com/inventory-check.cgi?item=12731&color=blue<e>&size=large

    질의 컴포넌트는 게이트웨이를 가리키는 경로 컴포넌트와 함께 전달된다.

    해당 URL은 제품번호가 12731, large 사이즈, 파란색 물품의 재고가 있는지 검사한다.

<br>

### 2.2.7 프래그먼트

- 프래그먼트는 리소스의 특정 부분을 가리킬 수 있게 한다.

- http://<e>www.joes.hardware<e>.com/tools.html#drills

    해당 URL은 tools.html의 일부를 가리킨다.

    일반적으로 HTTP 서버는 일부가 아닌 전체만 다루기 때문에 서버에 프래그먼트를 전달하지는 않는다. 서버로부터 전체 리소스를 받고 프래그먼트를 사용하여 원하는 부분만을 보여준다.

<br><br>

## 2.3 단축 URL

- 웹 클라이언트는 몇몇 단축 URL을 인식하고 사용한다. 상대 URL은 리소스 안에 있는 리소스를 간결하게 기술하는데 사용할 수 있다.

<br>

### 2.3.1 상대 URL

- URL은 절대 URL과 상대 URL로 나뉜다.

- 절대 URL은 리소스 접근에 필요한 모든 정보를 가지고 있고, 상대 URL은 URL을 짧게 표기하는 방식이다.

- URL을 처리하는 브라우저 같은 애플리케이션은 상대 URL과 절대 URL 간에 상호 변환을 할 수 있어야 한다.

- ./hammers.html 이라고 적혀 있는 경우

    1. 경로는 ./hammers.html, 기저 URL은 http://<e>www.joes.hardware<e>.com/tools.html

    2. 스킴,호스트,포트는 비어 있기에 기저 URL의 스킴,호스트,포트를 상속 받는다.
    
    3. 이를 합치면 http://<e>www.joes.hardware<e>.com/hammers.html


<br><br>

## 2.4 안전하지 않은 문자

- 안전한 전송이란 정보가 유실될 위험 없이 URL을 전송할 수 있다는 것을 의미한다.

- URL 설계자는 URL에 이진 데이터나 안전한 알파벳 외의 문자를 넣을 수 있게 이스케이프라는 기능을 추가하여 안전한 문자로 인코딩할 수 있게 설계하였다.

<br>

### 2.4.1 URL 문자 집합

- US_ASCII 문자는 오래된 문자 집합이기에 영어 이외의 언어들까지 지원하지는 않는다.

- 또한 URL에 이진 데이터를 포함하는 경우가 있기에 URL에 이스케이프 문자열을 쓸 수 있게 만들었다.

- 이스케이프 문자열이란 US-ASCII에서 사용이 금지된 문자이다.

<br>

### 2.4.2 인코딩 체계

- 안전하지 않은 문자를 퍼센트 기호(%)로 시작해 ASCII 코드로 표현되는 두개의 16진수 숫자로 이루어진 이스케이프 문자로 바꾼다.

- 예를 들어 빈 문자는 http://<e>www.joes-hardware<e>.com/more%20tools.html와 같이 표현한다.

<br>

### 2.4.3 문자 제한

- 몇몇 문자는 URL 내에서 특별한 의미로 예약되어 있다.

- 예를 들어, %, /, ., .., 와 같은 것들은 인코딩하여 사용해야 한다.

<br>

### 2.4.4 좀 더 알아보기

- 안전하지 않은 문자를 인코딩하여 혼동할 걱정 없이 URL 원형을 유지할 수 있도록 해야 한다.

<br><br>

## 2.5 스킴의 바다

| 스킴 | 설명 | 기본 구조 |
| --- | --- | --- |
| http | 일반 URL 포맷을 지키는 하이퍼텍스트 전송 프로토콜, 기본 포트값은 80 | http://<호스트>:<포트>/<경로>?<질의>#<프래그먼트> |
| https | http 커넥션의 양 끝단에서 암호화를 위해 SSL(보안 소켓 계층)을 사용, 기본 포트값은 443| https://<호스트>:<포트>/<경로>?<질의>#<프래그먼트> |
| ftp | 파일 전송 프로토콜 URL은 FTP 서버에 있는 파일을 내려받거나 올리고, 디렉터리에 있는 콘텐츠 목록을 가져오는 데 사용 | ftp://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>
| rtsp | 실시간 스트리밍 프로토콜을 통해서 읽을 수 있는 오디오 및 비디오 같은 미디어 리소스 식별자 | rtsp://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로> |

<br><br>

## 2.6 미래

- URL은 주소이기에 완벽하지 않다. 리소스가 옮겨지면 사용할 수 없기 때문이다.

- 그래서 객체의 위치에 상관 없이 실제 객체의 이름을 사용하는 방식으로 예방할 수 있다. 이것이 URN


<br><br>

## 참고 자료

URI, URL, URN의 차이

https://velog.io/@younoah/uri-url-urn
